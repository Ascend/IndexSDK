cmake_minimum_required(VERSION 3.14.1)

project(ock_hmm CXX)

include(${CMAKE_CURRENT_LIST_DIR}/cmake/tool_chain.cmake)
include(${CMAKE_CURRENT_LIST_DIR}/cmake/tool_chain_lib.cmake)

aux_source_directory(${CMAKE_CURRENT_LIST_DIR}/acladapter/executor HMM_SRC)
aux_source_directory(${CMAKE_CURRENT_LIST_DIR}/acladapter/param HMM_SRC)
aux_source_directory(${CMAKE_CURRENT_LIST_DIR}/acladapter/task HMM_SRC)
aux_source_directory(${CMAKE_CURRENT_LIST_DIR}/acladapter/utils HMM_SRC)
aux_source_directory(${CMAKE_CURRENT_LIST_DIR}/acladapter/data HMM_SRC)
aux_source_directory(${CMAKE_CURRENT_LIST_DIR}/hmm HMM_SRC)
aux_source_directory(${CMAKE_CURRENT_LIST_DIR}/hmm/mgr HMM_SRC)
aux_source_directory(${CMAKE_CURRENT_LIST_DIR}/hmm/mgr/data HMM_SRC)
aux_source_directory(${CMAKE_CURRENT_LIST_DIR}/hmm/mgr/algo HMM_SRC)
aux_source_directory(${CMAKE_CURRENT_LIST_DIR}/hmm/mgr/task HMM_SRC)
aux_source_directory(${CMAKE_CURRENT_LIST_DIR}/hmm/mgr/checker HMM_SRC)
aux_source_directory(${CMAKE_CURRENT_LIST_DIR}/log HMM_SRC)
aux_source_directory(${CMAKE_CURRENT_LIST_DIR}/conf HMM_SRC)
aux_source_directory(${CMAKE_CURRENT_LIST_DIR}/utils HMM_SRC)
aux_source_directory(${CMAKE_CURRENT_LIST_DIR}/hcps HMM_SRC)
aux_source_directory(${CMAKE_CURRENT_LIST_DIR}/hcps/stream HMM_SRC)
aux_source_directory(${CMAKE_CURRENT_LIST_DIR}/hcps/data HMM_SRC)
aux_source_directory(${CMAKE_CURRENT_LIST_DIR}/hcps/hfo HMM_SRC)
aux_source_directory(${CMAKE_CURRENT_LIST_DIR}/hcps/hfo/feature HMM_SRC)
aux_source_directory(${CMAKE_CURRENT_LIST_DIR}/hcps/hcop HMM_SRC)
aux_source_directory(${CMAKE_CURRENT_LIST_DIR}/hcps/hop HMM_SRC)
aux_source_directory(${CMAKE_CURRENT_LIST_DIR}/hcps/algo HMM_SRC)
aux_source_directory(${CMAKE_CURRENT_LIST_DIR}/vsa/algo HMM_SRC)
aux_source_directory(${CMAKE_CURRENT_LIST_DIR}/vsa/neighbor HMM_SRC)

add_library(ock_hmm SHARED ${HMM_SRC})

target_link_libraries(ock_hmm PUBLIC ascendcl pthread)
file(MAKE_DIRECTORY ${OUTPUT_PATH}/memory_bridge)
set(TARGET_INSTALL_LIB ${OUTPUT_PATH}/memory_bridge/lib)
set_target_properties(ock_hmm PROPERTIES VERSION 23.0.0 SOVERSION 1)
install(TARGETS ock_hmm DESTINATION ${TARGET_INSTALL_LIB}/ PERMISSIONS OWNER_WRITE OWNER_READ OWNER_EXECUTE GROUP_READ GROUP_EXECUTE WORLD_READ WORLD_EXECUTE)